let express,cors,bodyParser,connectDB;_572‍.x([["addNewtask",()=>addNewtask]]);_572‍.w("express",[["default",["express"],function(v){express=v}]]);_572‍.w("cors",[["default",["cors"],function(v){cors=v}]]);_572‍.w("body-parser",[["default",["bodyParser"],function(v){bodyParser=v}]]);_572‍.w("./connect-db.ts",[["connectDB",["connectDB"],function(v){connectDB=v}]]);


// import path from 'path';


const app = express();
const port = 8888; // default port to listen

// // Configure Express to use EJS
// app.set( "views", path.join( __dirname, "views" ) );
// app.set( "view engine", "ejs" );

app.use(
    cors(),
    bodyParser.urlencoded({extended:true}),
    bodyParser.json()
)

       const addNewtask = async (task) => {
    let db = await connectDB();
    let collection = db.collection(`task`);
    await collection.insertOne(task);
}

app.post('task/new', async(req, res)=>{
    let task = req.body.task;
    await addNewtask(task);
    res.send(200).send();
});

// // define a route handler for the default home page
// app.get( "/", ( req, res ) => {
//     // render the index template
//     res.render( "index" );
// } );

// start the express server
app.listen( port, () => {
    // tslint:disable-next-line:no-console
    console.log( `server started at http://localhost:${ port }` );
} );



